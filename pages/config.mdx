import { Steps } from 'nextra-theme-docs'

# Configuration

In this section, we will look at the different parameters you can tweak as a runtime engineer 
for your blockchain to be perfectly tailored to your needs.

| Parameter | Location  | Interpretation | Default |
|---|---|---|---|
|  MILLISECS_PER_BLOCK |  `crates/runtime/src/config.rs` | Average expected block time targeted. |6000 (ms)  |
|  BlockHashCount |  `crates/runtime/src/config.rs` | Maximum number of block number to block hash mappings to keep (oldest pruned first). |2400  |
|  ChainId |  `crates/runtime/src/pallets.rs` | Chain ID used to setup app chain  |`SN_GOERLI`  |

The core component of Madara is a custom substrate pallet named `starknet` which you can find under `crates/pallets/starknet`.

However as mentionned in the introduction, Madara is generic by essence.
It defines a set of types in its configuration specifically the traits that should be implemented by these types **NOT** the types themselves.
This very powerful concept will allow you to easily change core components of your chain.

Let's take a look at these types and their default values.

```rust
// `crates/runtime/src/pallets.rs`

// ...

/// Configure the Starknet pallet in pallets/starknet.
impl pallet_starknet::Config for Runtime {
    type RuntimeEvent = RuntimeEvent;
    type StateRoot = pallet_starknet::state_root::IntermediateStateRoot<Self>;
    type SystemHash = mp_starknet::crypto::hash::pedersen::PedersenHasher;
    type TimestampProvider = Timestamp;
    type UnsignedPriority = UnsignedPriority;
}
```

| Type  | Interpretation | Default |
|---|---|---|
|  RuntimeEvent  | Event type that will be emitted on extrinsics' execution. | Substrate RuntimeEvent |
|  StateRoot |  Defines how the state root is computed from the state. | [Starknet State Root](https://docs.starknet.io/documentation/architecture_and_concepts/State/starknet-state/#state-commitment) |
|  SystemHash |  Hashing function used to compute commitments. | Pedersen |
|  TimestampProvider |  Defines how the timestamp is retrieved (used for block timestamp) | [Timestamp Pallet](https://docs.rs/pallet-timestamp/latest/pallet_timestamp/) |

### Configuring Chain ID:
The Chain ID for your Madara app chain is configured in `crates/runtime/src/pallets.rs`.
In Madara your chain ID is represented as the montgomery represntation for a string.
To update this follow the below steps;
<Steps>
### Define your Chain ID:
Choose a string to represent your app chain.
### Convert Chain ID to felt
Navigate to `https://stark-utils.vercel.app/converter` and input your chosen string. The generated felt value is your hexadecimal representation for the string.
![stack](../static/img/stark-utils.png)
### Generate montgomery representation: 
Use Starkli to convert the felt value to a montgomery representation compatible with Madara.
```bash
starkli mont 85046245544016
[
    18444022593852143105,
    18446744073709551615,
    18446744073709551615,
    530195594727478800,
]
```

### Update the Chain ID:
Open crates/primitives/chain-id/src/lib.rs and add your Chain ID alongside existing definitions:
```rust
pub const MY_APP_CHAIN_ID: Felt252Wrapper = Felt252Wrapper(starknet_ff::FieldElement::from_mont([
    18444025906882525153,
    18446744073709551615,
    18446744073709551615,
    530251916243973616,
]));
```

### Update `pallets.rs`:
- Modify the import statement in `crates/runtime/src/pallets.rs` to include your new Chain ID definition (refer to https://github.com/keep-starknet-strange/madara/blob/main/crates/runtime/src/pallets.rs#L13 for reference).
- Update the usage of the Chain ID within the code itself (refer to https://github.com/keep-starknet-strange/madara/blob/main/crates/runtime/src/pallets.rs#L164 for reference).

Rebuild your Madara app chain with the updated pallets.rs file. Your app chain will now operate with your custom Chain ID.
</Steps>
