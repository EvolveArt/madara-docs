import { Steps } from 'nextra-theme-docs'

# Build upon Madara

In this section, we will guide you through the building process so you can start hacking on the Madara stack.
We will go from running your chain locally to changing the DA providers and interacting with smart contracts on your own chain!

## Let's start
Madara offers two installation methods tailored to your preferences:
- **Karnot CLI**: CLI tool that automates and simplifies Madara's setup and installation, suitable for users who prefer a user-friendly approach.
- **Building from Source**: Build Madara from it's source code, allowing finer control over Madara's settings and behavior, suited for more advanced users or those with specific customization needs.


### Using Karnot CLI
Developed by the Karnot team, the Karnot CLI streamlines app chain deployment by automating configuration and setup.


The following repository outlines how to initialise and deploy your Madara node using Karnot CLI.<br></br>
`https://github.com/karnotxyz/karnot-cli`

### Cloning the Madara repository
<Steps>

### Install dependencies

We first need to make sure you have everything needed to complete this tutorial.

| Dependency  |  Version | Installation |
|---|---|---|
| Rust  | rustc 1.69.0-nightly  | `curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs \| sh` <br></br>`rustup toolchain install nightly` |
| nvm  | latest  | `curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh \| bash` |


### Build the chain

We will spin up a CairoVM Rollup from the Madara Stack source code. 
You could use docker images, but this way we keep the option to modify component behavior if you need to do so. 
The Madara stack source code is a monorepo which can be found [here](https://github.com/keep-starknet-strange/madara)

```bash
cd ~
git clone git@github.com:keep-starknet-strange/madara.git
```

Then let's build the chain in `release` mode

```bash
cd madara
cargo build --release
```

**Single-Node Development Chain**

You first need to setup up the node, which means you need to load the genesis state into your file system.

For a detailed review of values in the genesis state, refer to the following documentation <br></br>
`https://github.com/keep-starknet-strange/madara/blob/8c498ea363bfa995ac28154c449266f61a4679cc/docs/genesis.md#L4A%20little`

```bash
cargo run --release -- setup --chain=dev --from-remote
```

Now, you can start the node in development mode
```bash
cargo run --release -- --dev
```

This chain specification can be thought of as the main source of information that will be used when connecting to the chain. 

### *(Not available yet) Deploy your settlement smart contracts*

### Start your chain

Now that we are all setup, we can finally run the chain! ðŸ¥·

There are a lot of ways you can run the chain depending on which role you want to take :
- **Full node**<br></br>
Synchronizes with the chain to store the most recent block state and block headers for older blocks.
- **Archive node**<br></br>
Maintains all blocks starting from the genesis block with complete state available for every block.
- **RPC node**<br></br>
Exposes an RPC interface over HTTP or WebSocket ports for the chain so that users can read the blockchain state and submit transactions. 
There are often multiple RPC nodes behind a load balancer.
- **Validator node**<br></br>
Secures the chain by staking some chosen asset and votes on consensus along with other validators.

When developing your chain, you can simply run it in developer mode :

```bash
./target/release/madara --dev --execution=native
```

If you only care about exposing the RPC you can run the following : 
```bash
./target/release/madara --unsafe-ws-external --rpc-methods Safe --rpc-cors â€˜*â€™ --ws-max-connections 5000
```

If you want to keep the whole state of the chain in a `/tmp/ folder :
```bash
./target/release/madara --base-path /tmp/
```

In this case, note that you can purge the chain's state whenever you like by running : 
```bash
./target/release/madara purge-chain --base-path /tmp
```

### Deploy an account on your chain

Ooook, now your chain is finally running. It's time to deploy your own account!



### Make some transactions

### ðŸ¥·

</Steps>